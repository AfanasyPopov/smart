{"version":3,"sources":["../../src/pages/projects/projects.module.ts","../../src/pages/projects/projects.ts"],"names":[],"mappings":"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","file":"11.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ProjectsPage } from './projects';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    ProjectsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ProjectsPage),\n    TranslateModule.forChild()\n  ],\n})\nexport class ProjectsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/projects/projects.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ModalController, AlertController } from 'ionic-angular';\nimport {MyApp} from '../../app/app.component'\nimport {Api} from '../../providers/api/api'\nimport { HttpClient, HttpHeaders, HttpParams, HttpRequest, HttpEvent, HttpEventType ,HttpErrorResponse,} from '@angular/common/http';\nimport { ToastController } from 'ionic-angular/components/toast/toast-controller';\nimport { Platform } from 'ionic-angular';\nimport { ScreenOrientation } from '@ionic-native/screen-orientation';\n\n/**\n * Generated class for the ProjectsPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-projects',\n  templateUrl: 'projects.html',\n})\nexport class ProjectsPage {\n  projectsList=[]\n  isHaveAddPermission=false;\n  constructor(\n    private screenOrientation: ScreenOrientation,\n    public platform: Platform,\n    public alertCtrl: AlertController,\n    public toastCtrl: ToastController,\n    public navCtrl: NavController, \n    public navParams: NavParams,\n    public modalCtrl: ModalController,\n    public myApp:MyApp,\n    public api:Api\n  ) {\n    this.screenOrientation = screenOrientation;\n    if (this.myApp.user.role_name=='root'){\n      this.isHaveAddPermission=true;\n    }\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ProjectsPage');\n    this.getProjectsList();\n    this.setOrientations();\n    this.onOrientationChenge ()\n  }\n  openProject(projectId){\n    this.navCtrl.push('CardsPage')\n  }\n addProject(){\n    let addModal = this.modalCtrl.create('ProjectCreatePage',{file_db_root:this.myApp.file_db_root});\n      addModal.onDidDismiss(formData => {\n        formData.account_key = this.myApp.user.uuid_key\n        formData.projectManager = formData.projectManager.map(Number)\n        this.api.postLongRequest('addProject',formData)\n        .subscribe(\n          event => {\n            if (event.type === HttpEventType.DownloadProgress) {\n              console.log(\"Download progress event\", event);\n            }\n    \n            if (event.type === HttpEventType.UploadProgress) {\n              console.log(\"Upload progress event\", event);\n            }\n    \n            if (event.type === HttpEventType.Response) {\n              console.log(\"Результат создания Project:\", JSON.stringify(event.body));\n              var mess=JSON.stringify(event.body[0].mess);\n              let toast = this.toastCtrl.create({\n                message: mess,\n                duration: 3000,\n                position: 'top',\n                cssClass:'success',\n                showCloseButton:true,\n                closeButtonText:'OK'\n              });\n              toast.present(); \n              this.getProjectsList();\n            }\n          }\n        );\n        })\n    \n    addModal.present();\n  }\n  getProjectsList(){\n    var data={\n      account_key : this.myApp.user.uuid_key\n    }\n    this.api.postLongRequest('getProjectsList',data)\n    .subscribe(\n      event => {\n        if (event.type === HttpEventType.DownloadProgress) {\n          console.log(\"Download progress event\", event);\n        }\n\n        if (event.type === HttpEventType.UploadProgress) {\n          console.log(\"Upload progress event\", event);\n        }\n\n        if (event.type === HttpEventType.Response) {\n          this.projectsList=event.body['projectsList']\n          this.onOrientationChenge ()\n        }\n      }\n    );\n  }\n  mute(item){  }\n  more(item){  }\n  delete(projectId){\n      var idToIntex =null ;\n        this.projectsList.forEach(function (val,index,arr){\n            if (val.id==projectId){\n              idToIntex=index;\n            }\n        })\n      var confirmStatus = false;\n      let confirm = this.alertCtrl.create({\n        title: 'Удалить проект:',\n        message: this.projectsList[idToIntex].project_name,\n        buttons: [{\n            text: 'Отмена',\n            handler: () => {\n              console.log('Disagree clicked');\n              //confirm.dismiss();\n              //confirmStatus =false;\n            }\n          },\n          {\n            text: 'Согласен',\n            handler: () => {\n              console.log('Agree clicked');\n              this.deleteProject(projectId);\n            }\n          }\n        ]\n      });\n      confirm.present();\n    }\n\n  deleteProject(item){\n    var data={\n      account_key : this.myApp.user.uuid_key,\n      projectId:item\n    }\n    this.api.postLongRequest('delProject',data)\n    .subscribe(\n      event => {\n        if (event.type === HttpEventType.DownloadProgress) {\n          console.log(\"Download progress event\", event);\n        }\n\n        if (event.type === HttpEventType.UploadProgress) {\n          console.log(\"Upload progress event\", event);\n        }\n\n        if (event.type === HttpEventType.Response) {\n          //this.projectsList=event.body['projectsList']\n          this.getProjectsList();\n        }\n      }\n    );\n  }\n  setOrientations(){\n    this.screenOrientation.onChange().subscribe(\n      () => {\n          //alert('Orientation chenged')  \n          this.onOrientationChenge()  \n        })          \n      }\n\n     \n  onOrientationChenge () {\n      //alert(this.screenOrientation.type);\n      if(this.screenOrientation.type==='landscape-primary'){\n        this.projectsList.forEach(function(element,index,arr){\n          arr[index].show=true;\n        });      \n      } else {\n        this.projectsList.forEach(function(element,index,arr){\n          arr[index].show=false;\n        });      \n      }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/projects/projects.ts"],"sourceRoot":""}